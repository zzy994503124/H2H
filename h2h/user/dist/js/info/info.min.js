/*!H2H-1.0.0.js 2016-01-03 */
function toggle_panel_visibility(a,b,c){a.hasClass("speed-in")?(a.removeClass("speed-in").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){c.removeClass("overflow-hidden")}),b.removeClass("is-visible")):(a.addClass("speed-in").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){c.addClass("overflow-hidden")}),b.addClass("is-visible"))}function move_navigation(a,b){$(window).width()>=b?(a.detach(),a.appendTo("header")):(a.detach(),a.insertAfter("header"))}$(function(){$(".addcar").click(function(a){var b=!1,c=$("#bookName").text();if($(".cd-cart-items li p").each(function(){var a=$(this).text();c===a&&(b=!0)}),b===!0)$("#msg").text("已在购物车！").show().animate({width:"250px"},200).fadeOut(1e3);else{var d=$("#end").offset(),e=($(this),$("#img1").attr("src")),f=$('<img class="u-flyer" src="'+e+'">');f.fly({start:{left:a.pageX,top:a.pageY},end:{left:d.left+10,top:d.top+10,width:0,height:0},onEnd:function(){$("#msg").text("已成功加入购物车！").show().animate({width:"250px"},200).fadeOut(1e3),this.destory()}});var g,h=$("#cartNum").text();g=0===h?1:parseInt(h)+1,g>0&&$("#cartNum").removeClass("noBook"),$("#cartNum").text(g)}}),$("#addCar").click(function(){var a=!1,b=$("#bookName").text();if($(".cd-cart-items li p").each(function(){var c=$(this).text();b===c&&(a=!0)}),a===!0)$("#msg").text("已在购物车！").show().animate({width:"250px"},200).fadeOut(1e3);else{var c=$("#price").text(),d=$("<li></li>"),e=$("<p></p>");e.text(b),d.append(e);var f=$("<div></div>");f.addClass("cd-price");var g=$("<span></span>");g.text("￥");var h=$("<span></span>");h.addClass("cart-bookPrice"),h.text(c);var i=$("<span></span>");i.text("/d"),f.append(g).append(h).append(i);var j=$("<div></div>"),k=$("<a></a>");k.addClass("minusDay");var l=$("<i></i>");l.addClass("icon-minus"),k.append(l),k.click(function(){var a=$(this).parents("div.cd-price").find("input.cart-rentDays").val(),b=parseInt(a)-1,c=$(this).parents("div.cd-price").find("span.cart-bookPrice").text(),d=b*parseFloat(c),e=0;0>=b?($(this).parents("div.cd-price").find("input.cart-rentDays").val(0),$(this).parents("li").find("span.subTotal").text(0)):($(this).parents("div.cd-price").find("input.cart-rentDays").val(b),$(this).parents("li").find("span.subTotal").text(d.toFixed(2))),$(".subTotal").each(function(){var a=$(this).text();e=parseFloat(a)+e,e=parseFloat(e)}),$("#total").text("￥ "+e.toFixed(2))});var m=$("<input />");m.attr("type","text").attr("value","0"),m.addClass("cart-rentDays");var n=$("<a></a>");n.addClass("plusDay");var o=$("<i></i>");o.addClass("icon-plus"),n.append(o),n.click(function(){var a=$(this).parents("div.cd-price").find("input.cart-rentDays").val(),b=parseInt(a)+1,c=$(this).parents("div.cd-price").find("span.cart-bookPrice").text(),d=b*parseFloat(c);$(this).parents("div.cd-price").find("input.cart-rentDays").val(b),$(this).parents("li").find("span.subTotal").text(d.toFixed(2));var e=0;$(".subTotal").each(function(){var a=$(this).text();e=parseFloat(a)+e,e=parseFloat(e)}),$("#total").text("￥ "+e.toFixed(2))}),j.append(k).append(m).append(n),f.append(j),d.append(f),$span_subTotal=$("<span></span>"),$span_subTotal.addClass("subTotal"),$span_subTotal.text(0),d.append(g),d.append($span_subTotal),$a_remove=$("<a></a>"),$a_remove.addClass("cd-item-remove").addClass("cd-img-replace"),$a_remove.text("Remove"),$a_remove.click(function(){$(this).parent().remove();var a=0;$(".subTotal").each(function(){var b=$(this).text();a=parseFloat(b)+a,a=parseFloat(a)});var b=$("#cartNum").text(),c=parseInt(b)-1;0>=c?(c=0,$("#cartNum").addClass("noBook"),$("#cartNum").text(c)):$("#cartNum").text(c),$("#total").text("￥ "+a.toFixed(2))}),d.append($a_remove),$(".cd-cart-items").append(d)}})}),$(function(){$(".box").hover(function(){var a=$(this).find(".box-overlay");a.removeClass(a.data("return")).addClass(a.data("hover"))},function(){var a=$(this).find(".box-overlay");a.removeClass(a.data("hover")).addClass(a.data("return"))})}),jQuery(document).ready(function(a){var b=1200,c=a("#main-nav"),d=a("#cd-cart-trigger"),e=a("#cd-hamburger-menu"),f=a("#cd-cart"),g=a("#cd-shadow-layer");e.on("click",function(b){b.preventDefault(),f.removeClass("speed-in"),toggle_panel_visibility(c,g,a("body"))}),d.on("click",function(b){b.preventDefault(),c.removeClass("speed-in"),toggle_panel_visibility(f,g,a("body"))}),g.on("click",function(){g.removeClass("is-visible"),f.hasClass("speed-in")?(f.removeClass("speed-in").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("body").removeClass("overflow-hidden")}),c.removeClass("speed-in")):(c.removeClass("speed-in").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("body").removeClass("overflow-hidden")}),f.removeClass("speed-in"))}),move_navigation(c,b),a(window).on("resize",function(){move_navigation(c,b),a(window).width()>=b&&c.hasClass("speed-in")&&(c.removeClass("speed-in"),g.removeClass("is-visible"),a("body").removeClass("overflow-hidden"))})}),$(document).ready(function(){"use strict";$(".menu > ul > li:has( > ul)").addClass("menu-dropdown-icon"),$(".menu > ul > li > ul:not(:has(ul))").addClass("normal-sub"),$(".menu > ul").before('<a href="#" class="menu-mobile">Navigation</a>'),$(".menu > ul > li").hover(function(a){$(window).width()>943&&($(this).children("ul").stop(!0,!1).fadeToggle(150),a.preventDefault())}),$(".menu > ul > li").click(function(a){$(window).width()<=943&&($(this).children("ul").fadeToggle(150),a.preventDefault())}),$(".menu-mobile").click(function(a){$(".menu > ul").toggleClass("show-on-mobile"),a.preventDefault()})});